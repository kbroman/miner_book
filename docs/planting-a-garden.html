<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>6 Planting a garden | R Programming with Minecraft</title>
  <meta name="description" content="The miner R package allows you to interact with Minecraft using the R programming language. This book shows you how to do use it." />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="6 Planting a garden | R Programming with Minecraft" />
  <meta property="og:type" content="book" />
  
  <meta property="og:image" content="cover_sm.png" />
  <meta property="og:description" content="The miner R package allows you to interact with Minecraft using the R programming language. This book shows you how to do use it." />
  <meta name="github-repo" content="kbroman/miner_book" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="6 Planting a garden | R Programming with Minecraft" />
  
  <meta name="twitter:description" content="The miner R package allows you to interact with Minecraft using the R programming language. This book shows you how to do use it." />
  <meta name="twitter:image" content="cover_sm.png" />

<meta name="author" content="Brooke Anderson, Karl Broman, Gergely DarÃ³czi, Mario Inchiosa, David Smith, and Ali Zaidi" />


<meta name="date" content="2020-12-14" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="building-a-tower-and-jumping-on-top.html"/>
<link rel="next" href="number-guess-chat-bot-in-minecraft.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<link href="libs/anchor-sections-1.0/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0/anchor-sections.js"></script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="chapter" data-level="2" data-path="installation-and-configuration.html"><a href="installation-and-configuration.html"><i class="fa fa-check"></i><b>2</b> Installation and configuration</a><ul>
<li class="chapter" data-level="2.1" data-path="installation-and-configuration.html"><a href="installation-and-configuration.html#mac-os-x"><i class="fa fa-check"></i><b>2.1</b> Mac OS X</a><ul>
<li class="chapter" data-level="2.1.1" data-path="installation-and-configuration.html"><a href="installation-and-configuration.html#docker-on-mac-os-x"><i class="fa fa-check"></i><b>2.1.1</b> Docker on Mac OS X</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="installation-and-configuration.html"><a href="installation-and-configuration.html#windows"><i class="fa fa-check"></i><b>2.2</b> Windows</a></li>
<li class="chapter" data-level="2.3" data-path="installation-and-configuration.html"><a href="installation-and-configuration.html#linux"><i class="fa fa-check"></i><b>2.3</b> Linux</a><ul>
<li class="chapter" data-level="2.3.1" data-path="installation-and-configuration.html"><a href="installation-and-configuration.html#install"><i class="fa fa-check"></i><b>2.3.1</b> Install</a></li>
<li class="chapter" data-level="2.3.2" data-path="installation-and-configuration.html"><a href="installation-and-configuration.html#connect-with-miner"><i class="fa fa-check"></i><b>2.3.2</b> Connect with miner</a></li>
<li class="chapter" data-level="2.3.3" data-path="installation-and-configuration.html"><a href="installation-and-configuration.html#configure"><i class="fa fa-check"></i><b>2.3.3</b> Configure</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="installation-and-configuration.html"><a href="installation-and-configuration.html#docker"><i class="fa fa-check"></i><b>2.4</b> Docker</a><ul>
<li class="chapter" data-level="2.4.1" data-path="installation-and-configuration.html"><a href="installation-and-configuration.html#what-is-docker"><i class="fa fa-check"></i><b>2.4.1</b> What is Docker?</a></li>
<li class="chapter" data-level="2.4.2" data-path="installation-and-configuration.html"><a href="installation-and-configuration.html#the-miner-dockerfile"><i class="fa fa-check"></i><b>2.4.2</b> The <code>miner</code> Dockerfile</a></li>
<li class="chapter" data-level="2.4.3" data-path="installation-and-configuration.html"><a href="installation-and-configuration.html#building-a-docker-image"><i class="fa fa-check"></i><b>2.4.3</b> Building a Docker image</a></li>
<li class="chapter" data-level="2.4.4" data-path="installation-and-configuration.html"><a href="installation-and-configuration.html#running-a-docker-container-from-the-image"><i class="fa fa-check"></i><b>2.4.4</b> Running a Docker container from the image</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="installation-and-configuration.html"><a href="installation-and-configuration.html#raspberry-pi"><i class="fa fa-check"></i><b>2.5</b> Raspberry Pi</a><ul>
<li class="chapter" data-level="2.5.1" data-path="installation-and-configuration.html"><a href="installation-and-configuration.html#setting-up-a-raspberry-pi"><i class="fa fa-check"></i><b>2.5.1</b> Setting up a Raspberry Pi</a></li>
<li class="chapter" data-level="2.5.2" data-path="installation-and-configuration.html"><a href="installation-and-configuration.html#minecraft-pi"><i class="fa fa-check"></i><b>2.5.2</b> Minecraft Pi</a></li>
<li class="chapter" data-level="2.5.3" data-path="installation-and-configuration.html"><a href="installation-and-configuration.html#installing-r-on-a-raspberry-pi"><i class="fa fa-check"></i><b>2.5.3</b> Installing R on a Raspberry Pi</a></li>
<li class="chapter" data-level="2.5.4" data-path="installation-and-configuration.html"><a href="installation-and-configuration.html#minecraft-server-on-a-raspberry-pi"><i class="fa fa-check"></i><b>2.5.4</b> Minecraft Server on a Raspberry Pi</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="a-stairway-to-heaven.html"><a href="a-stairway-to-heaven.html"><i class="fa fa-check"></i><b>3</b> A Stairway to Heaven</a><ul>
<li class="chapter" data-level="3.1" data-path="a-stairway-to-heaven.html"><a href="a-stairway-to-heaven.html#building-objects"><i class="fa fa-check"></i><b>3.1</b> Building Objects</a></li>
<li class="chapter" data-level="3.2" data-path="a-stairway-to-heaven.html"><a href="a-stairway-to-heaven.html#stairway-to-heaven"><i class="fa fa-check"></i><b>3.2</b> Stairway to heaven</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="building-a-rainbow.html"><a href="building-a-rainbow.html"><i class="fa fa-check"></i><b>4</b> Building a rainbow</a><ul>
<li class="chapter" data-level="4.1" data-path="building-a-rainbow.html"><a href="building-a-rainbow.html#build-rainbow-with-r-graphics"><i class="fa fa-check"></i><b>4.1</b> Build rainbow with R graphics</a></li>
<li class="chapter" data-level="4.2" data-path="building-a-rainbow.html"><a href="building-a-rainbow.html#minecraft-rainbow"><i class="fa fa-check"></i><b>4.2</b> Minecraft Rainbow</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="building-a-tower-and-jumping-on-top.html"><a href="building-a-tower-and-jumping-on-top.html"><i class="fa fa-check"></i><b>5</b> Building a tower and jumping on top</a><ul>
<li class="chapter" data-level="5.1" data-path="building-a-tower-and-jumping-on-top.html"><a href="building-a-tower-and-jumping-on-top.html#connect-to-a-minecraft-server"><i class="fa fa-check"></i><b>5.1</b> Connect to a Minecraft server</a></li>
<li class="chapter" data-level="5.2" data-path="building-a-tower-and-jumping-on-top.html"><a href="building-a-tower-and-jumping-on-top.html#figure-out-your-player-id"><i class="fa fa-check"></i><b>5.2</b> Figure out your player ID</a></li>
<li class="chapter" data-level="5.3" data-path="building-a-tower-and-jumping-on-top.html"><a href="building-a-tower-and-jumping-on-top.html#figure-out-your-current-position"><i class="fa fa-check"></i><b>5.3</b> Figure out your current position</a></li>
<li class="chapter" data-level="5.4" data-path="building-a-tower-and-jumping-on-top.html"><a href="building-a-tower-and-jumping-on-top.html#build-a-tower"><i class="fa fa-check"></i><b>5.4</b> Build a tower</a></li>
<li class="chapter" data-level="5.5" data-path="building-a-tower-and-jumping-on-top.html"><a href="building-a-tower-and-jumping-on-top.html#jump-on-top-of-the-tower"><i class="fa fa-check"></i><b>5.5</b> Jump on top of the tower</a></li>
<li class="chapter" data-level="5.6" data-path="building-a-tower-and-jumping-on-top.html"><a href="building-a-tower-and-jumping-on-top.html#close-the-connection"><i class="fa fa-check"></i><b>5.6</b> Close the connection</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="planting-a-garden.html"><a href="planting-a-garden.html"><i class="fa fa-check"></i><b>6</b> Planting a garden</a><ul>
<li class="chapter" data-level="6.1" data-path="planting-a-garden.html"><a href="planting-a-garden.html#connect-with-a-minecraft-server"><i class="fa fa-check"></i><b>6.1</b> Connect with a Minecraft server</a></li>
<li class="chapter" data-level="6.2" data-path="planting-a-garden.html"><a href="planting-a-garden.html#create-a-dataframe-with-recent-hits"><i class="fa fa-check"></i><b>6.2</b> Create a dataframe with recent hits</a></li>
<li class="chapter" data-level="6.3" data-path="planting-a-garden.html"><a href="planting-a-garden.html#build-ice-towers"><i class="fa fa-check"></i><b>6.3</b> Build ice towers</a></li>
<li class="chapter" data-level="6.4" data-path="planting-a-garden.html"><a href="planting-a-garden.html#write-a-function-to-do-this-interactively"><i class="fa fa-check"></i><b>6.4</b> Write a function to do this interactively</a></li>
<li class="chapter" data-level="6.5" data-path="planting-a-garden.html"><a href="planting-a-garden.html#close-the-connection-1"><i class="fa fa-check"></i><b>6.5</b> Close the connection</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="number-guess-chat-bot-in-minecraft.html"><a href="number-guess-chat-bot-in-minecraft.html"><i class="fa fa-check"></i><b>7</b> Number-guess chat bot in Minecraft</a><ul>
<li class="chapter" data-level="7.1" data-path="number-guess-chat-bot-in-minecraft.html"><a href="number-guess-chat-bot-in-minecraft.html#background"><i class="fa fa-check"></i><b>7.1</b> Background</a></li>
<li class="chapter" data-level="7.2" data-path="number-guess-chat-bot-in-minecraft.html"><a href="number-guess-chat-bot-in-minecraft.html#init"><i class="fa fa-check"></i><b>7.2</b> Init</a></li>
<li class="chapter" data-level="7.3" data-path="number-guess-chat-bot-in-minecraft.html"><a href="number-guess-chat-bot-in-minecraft.html#loop"><i class="fa fa-check"></i><b>7.3</b> Loop</a></li>
<li class="chapter" data-level="7.4" data-path="number-guess-chat-bot-in-minecraft.html"><a href="number-guess-chat-bot-in-minecraft.html#lets-play"><i class="fa fa-check"></i><b>7.4</b> Letâs Play!</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="rendering-an-image-in-minecraft.html"><a href="rendering-an-image-in-minecraft.html"><i class="fa fa-check"></i><b>8</b> Rendering an image in Minecraft</a><ul>
<li class="chapter" data-level="8.1" data-path="rendering-an-image-in-minecraft.html"><a href="rendering-an-image-in-minecraft.html#load-and-prepare-an-image-file"><i class="fa fa-check"></i><b>8.1</b> Load and prepare an image file</a></li>
<li class="chapter" data-level="8.2" data-path="rendering-an-image-in-minecraft.html"><a href="rendering-an-image-in-minecraft.html#render-the-image-in-minecraft"><i class="fa fa-check"></i><b>8.2</b> Render the image in Minecraft</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="rendering-the-r-logo-in-minecraft.html"><a href="rendering-the-r-logo-in-minecraft.html"><i class="fa fa-check"></i><b>9</b> Rendering the R logo in Minecraft</a><ul>
<li class="chapter" data-level="9.1" data-path="rendering-the-r-logo-in-minecraft.html"><a href="rendering-the-r-logo-in-minecraft.html#load-and-prepare-an-image-file-1"><i class="fa fa-check"></i><b>9.1</b> Load and prepare an image file</a></li>
<li class="chapter" data-level="9.2" data-path="rendering-the-r-logo-in-minecraft.html"><a href="rendering-the-r-logo-in-minecraft.html#render-in-minecraft"><i class="fa fa-check"></i><b>9.2</b> Render in Minecraft</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="generate-a-maze-in-minecraft.html"><a href="generate-a-maze-in-minecraft.html"><i class="fa fa-check"></i><b>10</b> Generate a maze in Minecraft</a><ul>
<li class="chapter" data-level="10.1" data-path="generate-a-maze-in-minecraft.html"><a href="generate-a-maze-in-minecraft.html#generate-a-random-maze"><i class="fa fa-check"></i><b>10.1</b> Generate a random maze</a></li>
<li class="chapter" data-level="10.2" data-path="generate-a-maze-in-minecraft.html"><a href="generate-a-maze-in-minecraft.html#transform-maze-graph-into-matrix"><i class="fa fa-check"></i><b>10.2</b> Transform maze graph into matrix</a></li>
<li class="chapter" data-level="10.3" data-path="generate-a-maze-in-minecraft.html"><a href="generate-a-maze-in-minecraft.html#render-the-maze-in-minecraft"><i class="fa fa-check"></i><b>10.3</b> Render the maze in Minecraft</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="random-walks-in-the-minecraft-world.html"><a href="random-walks-in-the-minecraft-world.html"><i class="fa fa-check"></i><b>11</b> Random Walks in the Minecraft World</a><ul>
<li class="chapter" data-level="11.1" data-path="random-walks-in-the-minecraft-world.html"><a href="random-walks-in-the-minecraft-world.html#recurrent-random-walks"><i class="fa fa-check"></i><b>11.1</b> Recurrent Random Walks</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i><b>12</b> References</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R Programming with Minecraft</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="planting-a-garden" class="section level1">
<h1><span class="header-section-number">6</span> Planting a garden</h1>
<p>From within R, you can get a record of recent events, like block hits. You can take advantage of this to place blocks at the places you hit. This tutorial shows how to plant random flowers at every spot you hit. It then expands on these ideas to show how to make ice towers.</p>
<div id="connect-with-a-minecraft-server" class="section level2">
<h2><span class="header-section-number">6.1</span> Connect with a Minecraft server</h2>
<p>First, you need to connect to a Minecraft server, which you can do with the <code>mc_connect</code> function:</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="planting-a-garden.html#cb47-1"></a><span class="kw">mc_connect</span>()</span></code></pre></div>
</div>
<div id="create-a-dataframe-with-recent-hits" class="section level2">
<h2><span class="header-section-number">6.2</span> Create a dataframe with recent hits</h2>
<p>The <code>getBlockHits</code> function will pull a dataframe with recent hits made by players in the Minecraft world. This dataframe will only include hits that were made by an iron sword and with a right click.
Go into the game, make sure you have an iron sword, and use the right click to hit some blocks around you. Go back into R and create a dataframe with those hits using:</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="planting-a-garden.html#cb48-1"></a>recent_hits &lt;-<span class="st"> </span><span class="kw">getBlockHits</span>()</span>
<span id="cb48-2"><a href="planting-a-garden.html#cb48-2"></a><span class="kw">head</span>(recent_hits, <span class="dv">3</span>)</span></code></pre></div>
<pre><code>    x  y  z block  player
1  10  0  8     2 5799549
2  10  0  8     2 5799549
3  10  0  8     2 5799549</code></pre>
<p>The <code>getBlockHits</code> function will return hits from all players. You just want hits that you made. You can use functions in the <code>dplyr</code> library to filter the returned dataset just to those you made. You will need to know what your player ID is, but once you do, you can use <code>filter</code> to get down to just the rows of the hits dataframe where the player id equals your ID using the logical statement <code>player == [your player ID]</code>:</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="planting-a-garden.html#cb50-1"></a><span class="kw">library</span>(dplyr)</span>
<span id="cb50-2"><a href="planting-a-garden.html#cb50-2"></a>hit_locs &lt;-<span class="st"> </span>recent_hits <span class="op">%&gt;%</span></span>
<span id="cb50-3"><a href="planting-a-garden.html#cb50-3"></a><span class="st">  </span><span class="kw">filter</span>(player <span class="op">==</span><span class="st"> </span><span class="dv">5799549</span>)</span></code></pre></div>
<p>Now you know where your character made hits. The next step is to place flowers there. To start, letâs make a dataframe with several of the different flowers available in Minecraft. To do this, we can filter the <code>mc_items</code> dataframe that comes with the <code>miner</code> dataset to just the rows with certain types of flowers:</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="planting-a-garden.html#cb51-1"></a><span class="kw">data</span>(mc_items)</span>
<span id="cb51-2"><a href="planting-a-garden.html#cb51-2"></a>flowers &lt;-<span class="st"> </span>mc_items <span class="op">%&gt;%</span></span>
<span id="cb51-3"><a href="planting-a-garden.html#cb51-3"></a><span class="st">  </span><span class="kw">filter</span>(name <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Sunflower&quot;</span>, <span class="st">&quot;Lilac&quot;</span>, <span class="st">&quot;Rose Bush&quot;</span>, <span class="st">&quot;Peony&quot;</span>,</span>
<span id="cb51-4"><a href="planting-a-garden.html#cb51-4"></a>                     <span class="st">&quot;Blue Orchid&quot;</span>, <span class="st">&quot;Red Tulip&quot;</span>, <span class="st">&quot;Pink Tulip&quot;</span>,</span>
<span id="cb51-5"><a href="planting-a-garden.html#cb51-5"></a>                     <span class="st">&quot;Oxeye Daisy&quot;</span>))</span>
<span id="cb51-6"><a href="planting-a-garden.html#cb51-6"></a>flowers</span></code></pre></div>
<pre><code>         name  id style
1 Blue Orchid  38     1
2   Red Tulip  38     4
3  Pink Tulip  38     7
4 Oxeye Daisy  38     8
5   Sunflower 175     0
6       Lilac 175     1
7   Rose Bush 175     4
8       Peony 175     5</code></pre>
<p>Now, you can use a loop. This will loop through every row of the hits dataframe. For each hit, it will randomly pick one of the flower types and place it at that block:</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="planting-a-garden.html#cb53-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(hit_locs)){</span>
<span id="cb53-2"><a href="planting-a-garden.html#cb53-2"></a>  this_flower &lt;-<span class="st"> </span><span class="kw">sample_n</span>(flowers, <span class="dv">1</span>)</span>
<span id="cb53-3"><a href="planting-a-garden.html#cb53-3"></a>  <span class="kw">setBlock</span>(hit_locs<span class="op">$</span>x[i], hit_locs<span class="op">$</span>y[i], hit_locs<span class="op">$</span>z[i],</span>
<span id="cb53-4"><a href="planting-a-garden.html#cb53-4"></a>           <span class="dt">id =</span> this_flower<span class="op">$</span>id, <span class="dt">style =</span> this_flower<span class="op">$</span>style)</span>
<span id="cb53-5"><a href="planting-a-garden.html#cb53-5"></a>}</span></code></pre></div>
<p>If you go back into your Minecraft world, you should see flowers where you made your hits, like this:</p>
<p><img src="figure/flowers.png" /></p>
</div>
<div id="build-ice-towers" class="section level2">
<h2><span class="header-section-number">6.3</span> Build ice towers</h2>
<p>Expanding on this, instead of just adding in flowers, you could make full towers. The <code>setBlocks</code> function lets you fill a cuboid space with a single type of blocks. If you have a dataframe of hit locations named <code>hit_locs</code>, as in the previous example, you can add ice towers with random heights between 1 and 4 units at each location using the following loop:</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="planting-a-garden.html#cb54-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(hit_locs)){</span>
<span id="cb54-2"><a href="planting-a-garden.html#cb54-2"></a>  tower_height &lt;-<span class="st"> </span><span class="kw">sample</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">4</span>, <span class="dt">size =</span> <span class="dv">1</span>)</span>
<span id="cb54-3"><a href="planting-a-garden.html#cb54-3"></a>  <span class="kw">setBlocks</span>(hit_locs<span class="op">$</span>x[i], hit_locs<span class="op">$</span>y[i], hit_locs<span class="op">$</span>z[i],</span>
<span id="cb54-4"><a href="planting-a-garden.html#cb54-4"></a>            hit_locs<span class="op">$</span>x[i], hit_locs<span class="op">$</span>y[i] <span class="op">+</span><span class="st"> </span>tower_height, hit_locs<span class="op">$</span>z[i],</span>
<span id="cb54-5"><a href="planting-a-garden.html#cb54-5"></a>            <span class="dt">id =</span> <span class="dv">212</span>)</span>
<span id="cb54-6"><a href="planting-a-garden.html#cb54-6"></a>}</span></code></pre></div>
<p><img src="figure/ice_towers.png" /></p>
</div>
<div id="write-a-function-to-do-this-interactively" class="section level2">
<h2><span class="header-section-number">6.4</span> Write a function to do this interactively</h2>
<p>You can expand on this idea and write a function that will âlistenâ to your Minecraft world from R and build ice towers as you make block hits.</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="planting-a-garden.html#cb55-1"></a>ice_towers &lt;-<span class="st"> </span><span class="cf">function</span>(player_id, <span class="dt">delay =</span> <span class="fl">0.2</span>){</span>
<span id="cb55-2"><a href="planting-a-garden.html#cb55-2"></a>  <span class="cf">while</span>(<span class="ot">TRUE</span>){</span>
<span id="cb55-3"><a href="planting-a-garden.html#cb55-3"></a>    latest_events &lt;-<span class="st"> </span>miner<span class="op">::</span><span class="kw">getBlockHits</span>()</span>
<span id="cb55-4"><a href="planting-a-garden.html#cb55-4"></a>    <span class="cf">if</span>(<span class="kw">nrow</span>(latest_events) <span class="op">==</span><span class="st"> </span><span class="dv">0</span>) <span class="cf">next</span></span>
<span id="cb55-5"><a href="planting-a-garden.html#cb55-5"></a></span>
<span id="cb55-6"><a href="planting-a-garden.html#cb55-6"></a>    latest_events &lt;-<span class="st"> </span>latest_events <span class="op">%&gt;%</span></span>
<span id="cb55-7"><a href="planting-a-garden.html#cb55-7"></a><span class="st">      </span>dplyr<span class="op">::</span><span class="kw">filter</span>(player <span class="op">==</span><span class="st"> </span>player_id) <span class="op">%&gt;%</span></span>
<span id="cb55-8"><a href="planting-a-garden.html#cb55-8"></a><span class="st">      </span>dplyr<span class="op">::</span><span class="kw">distinct</span>()</span>
<span id="cb55-9"><a href="planting-a-garden.html#cb55-9"></a></span>
<span id="cb55-10"><a href="planting-a-garden.html#cb55-10"></a>    <span class="cf">if</span>(<span class="kw">nrow</span>(latest_events) <span class="op">==</span><span class="st"> </span><span class="dv">0</span>) <span class="cf">next</span></span>
<span id="cb55-11"><a href="planting-a-garden.html#cb55-11"></a></span>
<span id="cb55-12"><a href="planting-a-garden.html#cb55-12"></a>    <span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(latest_events)){</span>
<span id="cb55-13"><a href="planting-a-garden.html#cb55-13"></a>      tower_height &lt;-<span class="st"> </span><span class="kw">sample</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">4</span>, <span class="dt">size =</span> <span class="dv">1</span>)</span>
<span id="cb55-14"><a href="planting-a-garden.html#cb55-14"></a>      miner<span class="op">::</span><span class="kw">setBlocks</span>(latest_events<span class="op">$</span>x[i], latest_events<span class="op">$</span>y[i], latest_events<span class="op">$</span>z[i],</span>
<span id="cb55-15"><a href="planting-a-garden.html#cb55-15"></a>                       latest_events<span class="op">$</span>x[i], latest_events<span class="op">$</span>y[i] <span class="op">+</span><span class="st"> </span>tower_height, latest_events<span class="op">$</span>z[i],</span>
<span id="cb55-16"><a href="planting-a-garden.html#cb55-16"></a>                       <span class="dt">id =</span> <span class="dv">212</span>)</span>
<span id="cb55-17"><a href="planting-a-garden.html#cb55-17"></a>    }</span>
<span id="cb55-18"><a href="planting-a-garden.html#cb55-18"></a>    <span class="kw">Sys.sleep</span>(delay)</span>
<span id="cb55-19"><a href="planting-a-garden.html#cb55-19"></a>  }</span>
<span id="cb55-20"><a href="planting-a-garden.html#cb55-20"></a>}</span></code></pre></div>
<p>You can set this function to run from within your R session with a call like:</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="planting-a-garden.html#cb56-1"></a><span class="kw">ice_towers</span>(<span class="dt">player_id =</span> <span class="dv">7433954</span>)</span></code></pre></div>
<p>Then you can go inside your Minecraft world, and you should be able to make ice towers anywhere you hit with a right click with an iron sword.</p>
</div>
<div id="close-the-connection-1" class="section level2">
<h2><span class="header-section-number">6.5</span> Close the connection</h2>
<p>When youâre done working with the Minecraft world, you can close the connection using <code>mc_close</code>:</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="planting-a-garden.html#cb57-1"></a><span class="kw">mc_close</span>()</span></code></pre></div>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="building-a-tower-and-jumping-on-top.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="number-guess-chat-bot-in-minecraft.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
